# WebRTC P2P ì±„íŒ…

WebRTC í•™ìŠµì„ ìœ„í•œ ê°„ë‹¨í•œ P2P ì±„íŒ… ì˜ˆì œì…ë‹ˆë‹¤.

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
webRTC/
â”œâ”€â”€ signalingServer/        # WebSocket ì‹œê·¸ë„ë§ ì„œë²„
â”‚   â”œâ”€â”€ server.js          # ì„œë²„ ë©”ì¸ íŒŒì¼
â”‚   â””â”€â”€ package.json       # ì„œë²„ ì˜ì¡´ì„±
â”‚
â””â”€â”€ client/                # í´ë¼ì´ì–¸íŠ¸ (Vite + Vanilla JS)
    â”œâ”€â”€ src/
    â”‚   â”œâ”€â”€ main.js        # ë©”ì¸ ë¡œì§ (WebRTC)
    â”‚   â””â”€â”€ style.css      # ìŠ¤íƒ€ì¼
    â”œâ”€â”€ index.html
    â””â”€â”€ package.json       # í´ë¼ì´ì–¸íŠ¸ ì˜ì¡´ì„±
```

## ğŸš€ ì‹œì‘í•˜ê¸°

### 1. ì‹œê·¸ë„ë§ ì„œë²„ ì‹¤í–‰

```bash
cd signalingServer
npm install
npm start
```

ì„œë²„ê°€ `ws://localhost:8080`ì—ì„œ ì‹¤í–‰ë©ë‹ˆë‹¤.

### 2. í´ë¼ì´ì–¸íŠ¸ ì‹¤í–‰

```bash
cd client
npm install
npm run dev
```

ë¸Œë¼ìš°ì €ì—ì„œ `http://localhost:5173`ë¡œ ì ‘ì†í•©ë‹ˆë‹¤.

### 3. í…ŒìŠ¤íŠ¸

- ê°™ì€ ë¸Œë¼ìš°ì €ì—ì„œ ì—¬ëŸ¬ íƒ­ì„ ì—´ê±°ë‚˜
- ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜
- ì‹œí¬ë¦¿ ëª¨ë“œë¥¼ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

- **í”„ë¡ íŠ¸ì—”ë“œ**: Vanilla JavaScript, WebRTC API
- **ë°±ì—”ë“œ**: Node.js, WebSocket (ws)
- **ë¹Œë“œ ë„êµ¬**: Vite

## ğŸ“Š ì „ì²´ ë™ì‘ íë¦„

### 1ë‹¨ê³„: ì´ˆê¸° ì—°ê²° (WebSocket)

```
Browser A                Server              Browser B
   |                        |                     |
   |-- new-peer ----------->|                     |
   |                        |<-------- new-peer --|
   |<--- new-peer -------ë¸Œë¡œë“œìºìŠ¤íŠ¸               |
```

**Browser A**: WebSocket ì„œë²„ì— ì—°ê²°í•˜ê³  ìì‹ ì˜ IDë¥¼ ì „ì†¡
**Server**: í´ë¼ì´ì–¸íŠ¸ ëª©ë¡ì— Aë¥¼ ì¶”ê°€í•˜ê³ , ë‹¤ë¥¸ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ì—ê²Œ "Aê°€ ì™”ì–´!" ë¸Œë¡œë“œìºìŠ¤íŠ¸
**Browser B**: Aê°€ ì—°ê²°ë˜ì—ˆë‹¤ëŠ” ë©”ì‹œì§€ë¥¼ ë°›ê³  Aì™€ P2P ì—°ê²° ì‹œì‘

### 2ë‹¨ê³„: P2P ì—°ê²° ì„¤ì • (SDP êµí™˜)

```
Browser A                Server              Browser B
   |                        |                     |
   |                        |<-------- Offer -----| (createOffer)
   |<------- Offer ------ì¤‘ê³„                     |
   | (handleOffer)          |                     |
   |                        |                     |
   |------- Answer -------->|ì¤‘ê³„---- Answer ----->| (handleAnswer)
```

**Browser B (Offer ì „ì†¡)**:
1. `RTCPeerConnection` ìƒì„±
2. Data Channel ìƒì„± (`createDataChannel("chat")`)
3. Offer SDP ìƒì„± (`createOffer()`)
4. ë¡œì»¬ì— ì €ì¥ (`setLocalDescription()`)
5. WebSocketì„ í†µí•´ Aì—ê²Œ ì „ì†¡

**Browser A (Answer ì „ì†¡)**:
1. `RTCPeerConnection` ìƒì„±
2. Bì˜ Offerë¥¼ ìˆ˜ì‹ í•˜ì—¬ ì €ì¥ (`setRemoteDescription()`)
3. Answer SDP ìƒì„± (`createAnswer()`)
4. ë¡œì»¬ì— ì €ì¥ (`setLocalDescription()`)
5. WebSocketì„ í†µí•´ Bì—ê²Œ ì „ì†¡

**Browser B (Answer ìˆ˜ì‹ )**:
- Aì˜ Answerë¥¼ ìˆ˜ì‹ í•˜ì—¬ ì €ì¥ (`setRemoteDescription()`)
- SDP í˜‘ìƒ ì™„ë£Œ!

### 3ë‹¨ê³„: ë„¤íŠ¸ì›Œí¬ ê²½ë¡œ ì°¾ê¸° (ICE Candidate êµí™˜)

```
Browser A                Server              Browser B
   |                        |                     |
   |<------ candidate ---ì¤‘ê³„----- candidate ---->|
   |------- candidate ----->|ì¤‘ê³„--- candidate -->|
   |<------ candidate ---ì¤‘ê³„----- candidate ---->|
```

**ICE Candidateë€?**
- ë¸Œë¼ìš°ì €ê°€ ìƒëŒ€ë°©ì—ê²Œ ë„ë‹¬í•  ìˆ˜ ìˆëŠ” ë„¤íŠ¸ì›Œí¬ ê²½ë¡œ ì •ë³´
- ì—¬ëŸ¬ ê°œì˜ í›„ë³´ê°€ ìƒì„±ë¨:
  - Host candidate: ë¡œì»¬ IP (ì˜ˆ: 192.168.0.10:54321)
  - Server reflexive: STUN ì„œë²„ê°€ ì•Œë ¤ì¤€ ê³µì¸ IP (ì˜ˆ: 1.2.3.4:5678)
  - Relay: TURN ì„œë²„ë¥¼ í†µí•œ ì¤‘ê³„ ê²½ë¡œ

**STUN/TURN ì„œë²„ì˜ ì—­í• **:
- **STUN**: í´ë¼ì´ì–¸íŠ¸ì˜ ê³µì¸ IPì™€ í¬íŠ¸ ë²ˆí˜¸ë¥¼ ì•Œë ¤ì¤Œ
- **TURN**: ì§ì ‘ ì—°ê²°ì´ ë¶ˆê°€ëŠ¥í•  ë•Œ ë°ì´í„°ë¥¼ ì¤‘ê³„í•˜ëŠ” ë¦´ë ˆì´ ì„œë²„

**ë™ì‘ ê³¼ì •**:
1. `setLocalDescription()` í˜¸ì¶œ í›„ ìë™ìœ¼ë¡œ ICE candidate ìˆ˜ì§‘ ì‹œì‘
2. `onicecandidate` ì´ë²¤íŠ¸ê°€ ì—¬ëŸ¬ ë²ˆ ë°œìƒ
3. ê° candidateë¥¼ ìƒëŒ€ë°©ì—ê²Œ ì „ì†¡
4. ìƒëŒ€ë°©ì€ `addIceCandidate()`ë¡œ ê²½ë¡œ ì¶”ê°€
5. ë¸Œë¼ìš°ì €ê°€ ìë™ìœ¼ë¡œ ìµœì ì˜ ê²½ë¡œ ì„ íƒ

### 4ë‹¨ê³„: Data Channel ì—´ë¦¼ (P2P ì—°ê²° ì™„ë£Œ!)

```
Browser A â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• P2P ì—°ê²° â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Browser B
   |                                                   |
   | dataChannel.onopen ì‹¤í–‰                           | dataChannel.onopen ì‹¤í–‰
   | "ë°ì´í„° ì±„ë„ ì—´ë¦¼!"                                | "ë°ì´í„° ì±„ë„ ì—´ë¦¼!"
```

**ì—°ê²° ì„±ê³µ ì¡°ê±´**:
- SDP í˜‘ìƒ ì™„ë£Œ
- ICE candidate êµí™˜ ì™„ë£Œ
- ìµœì ì˜ ë„¤íŠ¸ì›Œí¬ ê²½ë¡œ ì„ íƒ ì™„ë£Œ

### 5ë‹¨ê³„: ë©”ì‹œì§€ ì£¼ê³ ë°›ê¸° (WebSocket ì„œë²„ ë¶ˆí•„ìš”!)

```
Browser A â•â•â•â•â•â•â• "ì•ˆë…•í•˜ì„¸ìš”!" â•â•â•â•â•â•â•> Browser B
Browser A <â•â•â•â•â•â•â• "ë°˜ê°€ì›Œìš”!" â•â•â•â•â•â•â• Browser B
```

**ë©”ì‹œì§€ ì „ì†¡**:
```javascript
dataChannel.send("ì•ˆë…•í•˜ì„¸ìš”!"); // P2P ì§ì ‘ ì „ì†¡
```

**ë©”ì‹œì§€ ìˆ˜ì‹ **:
```javascript
dataChannel.onmessage = (event) => {
  console.log(event.data); // "ì•ˆë…•í•˜ì„¸ìš”!"
};
```

## ğŸ”‘ í•µì‹¬ ê°œë…

### SDP (Session Description Protocol)

```javascript
// Offer: "ë‚˜ëŠ” ì´ëŸ° í†µì‹  ë°©ì‹ì„ ì§€ì›í•´"
const offer = await pc.createOffer();
await pc.setLocalDescription(offer); // ë‚´ ë¡œì»¬ì— ì €ì¥
// ìƒëŒ€ë°©ì—ê²Œ ì „ì†¡

// Answer: "ì¢‹ì•„, ë‚˜ë„ ê·¸ ë°©ì‹ìœ¼ë¡œ í†µì‹ í• ê²Œ"
const answer = await pc.createAnswer();
await pc.setLocalDescription(answer); // ë‚´ ë¡œì»¬ì— ì €ì¥
// ìƒëŒ€ë°©ì—ê²Œ ì „ì†¡
```

**setLocalDescription vs setRemoteDescription**:
- `setLocalDescription`: ë‚´ê°€ ë§Œë“  SDPë¥¼ ë‚´ PCì— ì €ì¥
- `setRemoteDescription`: ìƒëŒ€ë°©ì˜ SDPë¥¼ ë‚´ PCì— ì €ì¥

### ICE (Interactive Connectivity Establishment)

**Candidate íƒ€ì…**:

1. **Host**: ë¡œì»¬ ë„¤íŠ¸ì›Œí¬ ì£¼ì†Œ
   ```
   candidate: "192.168.0.10:54321 typ host"
   ```

2. **Server Reflexive (srflx)**: STUN ì„œë²„ê°€ ì•Œë ¤ì¤€ ê³µì¸ IP
   ```
   candidate: "1.2.3.4:5678 typ srflx"
   ```

3. **Relay**: TURN ì„œë²„ë¥¼ í†µí•œ ì¤‘ê³„
   ```
   candidate: "5.6.7.8:9012 typ relay"
   ```

**ì—°ê²° ìš°ì„ ìˆœìœ„**:
1. ì§ì ‘ ì—°ê²° (ê°™ì€ ë„¤íŠ¸ì›Œí¬) - ê°€ì¥ ë¹ ë¦„
2. STUNì„ í†µí•œ ì—°ê²° - ì¤‘ê°„ ì†ë„
3. TURNì„ í†µí•œ ì¤‘ê³„ - ê°€ì¥ ëŠë¦¼ (ì„œë²„ ë¹„ìš© ë°œìƒ)

### Data Channel

**ìƒì„± (Offer ë³´ë‚´ëŠ” ìª½ë§Œ)**:
```javascript
const dataChannel = pc.createDataChannel("chat");

dataChannel.onopen = () => {
  console.log("ì±„ë„ ì—´ë¦¼!");
};

dataChannel.onmessage = (event) => {
  console.log("ë©”ì‹œì§€:", event.data);
};
```

**ìˆ˜ì‹  (Offer ë°›ëŠ” ìª½)**:
```javascript
pc.ondatachannel = (event) => {
  const dataChannel = event.channel; // ìƒëŒ€ë°©ì´ ë§Œë“  ì±„ë„

  dataChannel.onopen = () => {
    console.log("ì±„ë„ ì—´ë¦¼!");
  };

  dataChannel.onmessage = (event) => {
    console.log("ë©”ì‹œì§€:", event.data);
  };
};
```

## ğŸ—ï¸ WebRTC ì•„í‚¤í…ì²˜ ë°©ì‹

### 1. Mesh (P2P, Full Mesh) - ì´ í”„ë¡œì íŠ¸ì˜ ë°©ì‹ âœ…

```
     Peer A
    /  |  \
   /   |   \
  /    |    \
Peer B-Peer C-Peer D
  \    |    /
   \   |   /
    \  |  /
   ê°ì ëª¨ë‘ì™€ ì—°ê²°
```

**íŠ¹ì§•**:
- ëª¨ë“  ì°¸ê°€ìê°€ ì„œë¡œ ì§ì ‘ ì—°ê²° (N:N)
- ê° í”¼ì–´ê°€ ë‹¤ë¥¸ ëª¨ë“  í”¼ì–´ì—ê²Œ ë°ì´í„° ì „ì†¡
- **ì—°ê²° ìˆ˜**: Nëª…ì¼ ë•Œ `N Ã— (N-1) / 2`ê°œ ì—°ê²°

**ì¥ì **:
- âœ… ì„œë²„ ë¶€í•˜ ìµœì†Œ (ì‹œê·¸ë„ë§ë§Œ í•„ìš”)
- âœ… ë‚®ì€ ì§€ì—° ì‹œê°„ (P2P ì§ì ‘ í†µì‹ )
- âœ… ì„œë²„ ë¹„ìš© ì €ë ´

**ë‹¨ì **:
- âŒ í´ë¼ì´ì–¸íŠ¸ ë¶€í•˜ ì¦ê°€ (ëª¨ë“  ì—°ê²° ìœ ì§€)
- âŒ ì—…ë¡œë“œ ëŒ€ì—­í­ ë¬¸ì œ (ê° í”¼ì–´ì—ê²Œ ì „ì†¡)
- âŒ í™•ì¥ì„± ì œí•œ (4~6ëª… ê¶Œì¥, ìµœëŒ€ 10ëª…)

**ì‚¬ìš© ì‚¬ë¡€**:
- ì†Œê·œëª¨ í™”ìƒ íšŒì˜ (2~6ëª…)
- P2P íŒŒì¼ ê³µìœ 
- 1:1 í†µí™”

### 2. SFU (Selective Forwarding Unit)

```
  Peer A ----\
              \
  Peer B ----> SFU Server --> Peer A
              /              |
  Peer C ----/               v
                          Peer B
                             |
                             v
                          Peer C
```

**íŠ¹ì§•**:
- ì¤‘ì•™ ì„œë²„ê°€ ìŠ¤íŠ¸ë¦¼ì„ ì¤‘ê³„ (ë³µí˜¸í™”/ì¬ì¸ì½”ë”© ì—†ìŒ)
- ê° í”¼ì–´ëŠ” ì„œë²„ì—ë§Œ ì—°ê²° (1:N)
- ì„œë²„ê°€ ìŠ¤íŠ¸ë¦¼ì„ ê·¸ëŒ€ë¡œ ì „ë‹¬

**ì¥ì **:
- âœ… í´ë¼ì´ì–¸íŠ¸ ë¶€í•˜ ì ìŒ (ì—…ë¡œë“œ 1ê°œë§Œ)
- âœ… í™•ì¥ì„± ì¢‹ìŒ (ìˆ˜ì‹­~ìˆ˜ë°± ëª…)
- âœ… ë‚®ì€ ì§€ì—° ì‹œê°„
- âœ… í’ˆì§ˆ ì œì–´ ê°€ëŠ¥ (Simulcast, SVC)

**ë‹¨ì **:
- âŒ ì„œë²„ ëŒ€ì—­í­ ë¹„ìš© ì¦ê°€
- âŒ ì„œë²„ ì¸í”„ë¼ í•„ìš”

**ì‚¬ìš© ì‚¬ë¡€**:
- ì¤‘ëŒ€ê·œëª¨ í™”ìƒ íšŒì˜ (10~100ëª…)
- ì›¨ë¹„ë‚˜ (ì ì€ ë°œí‘œì, ë§ì€ ì²­ì¤‘)
- ì˜¨ë¼ì¸ ìˆ˜ì—…

**ì£¼ìš” ì„œë¹„ìŠ¤**: Jitsi Meet, Zoom, Google Meet, Discord

### 3. MCU (Multipoint Control Unit)

```
  Peer A ----\
              \
  Peer B ----> MCU Server (ë¯¹ì‹±/í•©ì„±) --> í•©ì„±ëœ ìŠ¤íŠ¸ë¦¼
              /                        |
  Peer C ----/                         v
                                    ëª¨ë“  í”¼ì–´ì—ê²Œ
                                    ë™ì¼í•œ ìŠ¤íŠ¸ë¦¼ ì „ì†¡
```

**íŠ¹ì§•**:
- ì„œë²„ê°€ ëª¨ë“  ìŠ¤íŠ¸ë¦¼ì„ ë°›ì•„ì„œ **í•˜ë‚˜ë¡œ í•©ì„±**
- ê° í”¼ì–´ëŠ” í•©ì„±ëœ í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë¦¼ë§Œ ìˆ˜ì‹ 
- ì„œë²„ì—ì„œ ë³µí˜¸í™” â†’ ë¯¹ì‹± â†’ ì¬ì¸ì½”ë”©

**ì¥ì **:
- âœ… í´ë¼ì´ì–¸íŠ¸ ë¶€í•˜ ìµœì†Œ (ë‹¤ìš´ë¡œë“œ 1ê°œë§Œ)
- âœ… ì €ì‚¬ì–‘ ê¸°ê¸° ì§€ì›
- âœ… ì¼ì •í•œ ëŒ€ì—­í­ ì‚¬ìš©

**ë‹¨ì **:
- âŒ ì„œë²„ CPU ë¶€í•˜ ë§¤ìš° ë†’ìŒ (ì¸ì½”ë”©/ë””ì½”ë”©)
- âŒ ë†’ì€ ì§€ì—° ì‹œê°„ (ì²˜ë¦¬ ì‹œê°„)
- âŒ ì„œë²„ ë¹„ìš© ë§¤ìš° ë†’ìŒ

**ì‚¬ìš© ì‚¬ë¡€**:
- ëŒ€ê·œëª¨ ë°©ì†¡ (ìˆ˜ë°±~ìˆ˜ì²œ ëª…)
- ë ˆê±°ì‹œ ì‹œìŠ¤í…œ í˜¸í™˜

### ì•„í‚¤í…ì²˜ ë¹„êµí‘œ

| êµ¬ë¶„ | Mesh (P2P) | SFU | MCU |
|------|-----------|-----|-----|
| **ì„œë²„ ì—­í• ** | ì‹œê·¸ë„ë§ë§Œ | ìŠ¤íŠ¸ë¦¼ ì¤‘ê³„ | ìŠ¤íŠ¸ë¦¼ ë¯¹ì‹± |
| **í´ë¼ì´ì–¸íŠ¸ ì—…ë¡œë“œ** | N-1ê°œ | 1ê°œ | 1ê°œ |
| **í´ë¼ì´ì–¸íŠ¸ ë‹¤ìš´ë¡œë“œ** | N-1ê°œ | N-1ê°œ | 1ê°œ |
| **ì„œë²„ CPU** | ë‚®ìŒ | ë‚®ìŒ | **ë§¤ìš° ë†’ìŒ** |
| **ì„œë²„ ëŒ€ì—­í­** | ë‚®ìŒ | ë†’ìŒ | ì¤‘ê°„ |
| **ì§€ì—° ì‹œê°„** | ë‚®ìŒ | ë‚®ìŒ | ë†’ìŒ |
| **í™•ì¥ì„±** | ë‚®ìŒ (4~6ëª…) | ë†’ìŒ (ìˆ˜ë°± ëª…) | ë§¤ìš° ë†’ìŒ (ìˆ˜ì²œ ëª…) |
| **ë¹„ìš©** | ë‚®ìŒ | ì¤‘ê°„ | ë†’ìŒ |
| **ì´ í”„ë¡œì íŠ¸** | âœ… | âŒ | âŒ |

### ì—°ê²° ìˆ˜ ë° ëŒ€ì—­í­ ë¹„êµ (10ëª… ì°¸ê°€ ì‹œ)

**ì—°ê²° ìˆ˜**:
- **Mesh**: 45ê°œ ì—°ê²° (10 Ã— 9 / 2)
- **SFU**: 10ê°œ ì—°ê²° (ê°ì ì„œë²„ì™€ 1ê°œ)
- **MCU**: 10ê°œ ì—°ê²° (ê°ì ì„œë²„ì™€ 1ê°œ)

**ëŒ€ì—­í­ ì‚¬ìš© (ê° ìŠ¤íŠ¸ë¦¼ 1Mbps)**:
- **Mesh**: ê° í´ë¼ì´ì–¸íŠ¸ 9Mbps ì—…ë¡œë“œ + 9Mbps ë‹¤ìš´ë¡œë“œ = **18Mbps**
- **SFU**: ê° í´ë¼ì´ì–¸íŠ¸ 1Mbps ì—…ë¡œë“œ + 9Mbps ë‹¤ìš´ë¡œë“œ = **10Mbps**
- **MCU**: ê° í´ë¼ì´ì–¸íŠ¸ 1Mbps ì—…ë¡œë“œ + 1Mbps ë‹¤ìš´ë¡œë“œ = **2Mbps**

## ğŸŒ ì‹¤ì‹œê°„ í†µì‹  ê¸°ìˆ  ì´ì •ë¦¬

### 1. ë¯¸ë””ì–´ ì†¡ì¶œ ë° ë°°í¬ (ë°©ì†¡í•˜ê¸°)

#### RTMP (Real-Time Messaging Protocol) - ì†¡ì¶œìš©

**ì—­í• **: ì¹´ë©”ë¼ë¡œ ì°ì€ ì˜ìƒì„ ë°©ì†¡ ì„œë²„ë¡œ ì²˜ìŒ ë³´ë‚¼ ë•Œ ì‚¬ìš©

**íŠ¹ì§•**:
- ì§€ì—°ì‹œê°„ì´ ì§§ì•„ ìœ íŠœë²„ë‚˜ ìŠ¤íŠ¸ë¦¬ë¨¸ë“¤ì´ OBS ê°™ì€ í”„ë¡œê·¸ë¨ì„ ì“¸ ë•Œ í‘œì¤€ì²˜ëŸ¼ ì‚¬ìš©
- TCP ê¸°ë°˜ìœ¼ë¡œ ì•ˆì •ì ì¸ ì „ì†¡
- ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ ë°”ë¡œ ì¬ìƒí•˜ê¸°ëŠ” ì–´ë ¤ì›€

**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤**: OBS â†’ RTMP â†’ ìŠ¤íŠ¸ë¦¬ë° ì„œë²„

#### HLS / DASH - ì‹œì²­ìš©

**HLS (HTTP Live Streaming)**:
- ì• í”Œì´ ë§Œë“  í‘œì¤€ (ì•„ì´í°/Safari ê°•ì )
- ì˜ìƒì„ ì˜ê²Œ ìª¼ê°œì„œ ì „ì†¡ (.m3u8 í”Œë ˆì´ë¦¬ìŠ¤íŠ¸ + .ts íŒŒì¼)
- ì¸í„°ë„· ì†ë„ì— ë”°ë¼ í™”ì§ˆì„ ìë™ìœ¼ë¡œ ì¡°ì ˆ(ABR)
- ì§€ì—°ì‹œê°„: 5~30ì´ˆ

**DASH (Dynamic Adaptive Streaming over HTTP)**:
- ì•ˆë“œë¡œì´ë“œ/ìœ íŠœë¸Œ ë“±ì—ì„œ ì£¼ë¡œ ì“°ëŠ” í‘œì¤€
- HLSì™€ ìœ ì‚¬í•˜ì§€ë§Œ ë” ë²”ìš©ì 
- ì§€ì—°ì‹œê°„: 5~30ì´ˆ

**íŠ¹ì§•**:
- ì˜ìƒì„ ì˜ê²Œ ìª¼ê°œì„œ ì „ì†¡í•˜ê¸° ë•Œë¬¸ì— ëª‡ ì´ˆ ì •ë„ì˜ **ì§€ì—°ì‹œê°„(Latency)** ë°œìƒ
- CDNê³¼ í˜¸í™˜ì„±ì´ ì¢‹ìŒ
- HTTP ê¸°ë°˜ì´ë¼ ë°©í™”ë²½ ë¬¸ì œê°€ ì ìŒ

#### CDN (Content Delivery Network) - ëŒ€ê·œëª¨ ë°°í¬

**ì—­í• **: ì „ ì„¸ê³„ ê³³ê³³ì— ì„œë²„ë¥¼ ë‘ê³  ì˜ìƒì„ ë³µì œí•´ì„œ ì „ë‹¬í•˜ëŠ” ë§

**í•„ìš”ì„±**:
- ìˆ˜ë§Œ ëª…ì´ ë™ì‹œì— ì ‘ì†í•  ë•Œ í•œ ëŒ€ì˜ ì„œë²„ë¡œ ë²„í‹¸ ìˆ˜ ì—†ìŒ
- ì‹œì²­ìì™€ ê°€ì¥ ê°€ê¹Œìš´ ì„œë²„ì—ì„œ ì˜ìƒì„ ë³´ë‚´ì£¼ì–´ ë²„í¼ë§ì„ ì¤„ì„
- ì„œë²„ ë¶€í•˜ ë¶„ì‚°

**ì£¼ìš” ì„œë¹„ìŠ¤**: Cloudflare, AWS CloudFront, Akamai

### 2. ì´ˆì €ì§€ì—° ì–‘ë°©í–¥ í†µì‹  (í™”ìƒíšŒì˜/ì „í™”)

#### WebRTC (UDP/RTP ê¸°ë°˜)

**ì—­í• **: ë¸Œë¼ìš°ì €ë¼ë¦¬ ì¤‘ê°„ ì„œë²„ ì—†ì´ **ê±°ì˜ ì‹¤ì‹œê°„(0.5ì´ˆ ë¯¸ë§Œ)**ìœ¼ë¡œ ë°ì´í„°ë‚˜ ì˜ìƒì„ ì£¼ê³ ë°›ëŠ” ê¸°ìˆ 

**íŠ¹ì§•**:
- UDP ê¸°ë°˜ìœ¼ë¡œ ì†ë„ê°€ ë§¤ìš° ë¹ ë¦„
- P2P ì§ì ‘ ì—°ê²° ê°€ëŠ¥
- ë¸Œë¼ìš°ì € ë„¤ì´í‹°ë¸Œ ì§€ì›
- ì—°ê²° ë°©ì‹ì´ ë³µì¡ (ì‹œê·¸ë„ë§ í•„ìš”)

**í”„ë¡œí† ì½œ**: UDP/RTP/SRTP

**ì‚¬ìš© ì‚¬ë¡€**: í™”ìƒ íšŒì˜, ì „í™”, ì‹¤ì‹œê°„ ê²Œì„

#### SFU ì„œë²„ (ì¤‘ê³„ ì„œë²„)

**ì—­í• **: 1:1ì´ ì•„ë‹Œ ë‹¤ëŒ€ë‹¤(Group) í†µì‹ ì„ í•  ë•Œ ì¤‘ì‹¬ì—ì„œ êµí†µì •ë¦¬ë¥¼ í•´ì£¼ëŠ” ì„œë²„

**ë°©ì‹**:
- ê° ì°¸ì—¬ìì˜ ì˜ìƒì„ ë°›ì•„ì„œ ë‹¤ë¥¸ ì‚¬ëŒë“¤ì—ê²Œ ê·¸ëŒ€ë¡œ ë³µì‚¬í•´ì„œ ë¿Œë ¤ì¤Œ
- ë³µí˜¸í™”/ì¬ì¸ì½”ë”© ì—†ì´ ìŠ¤íŠ¸ë¦¼ì„ ê·¸ëŒ€ë¡œ ì¤‘ê³„
- í™”ìƒíšŒì˜ ì„œë¹„ìŠ¤(Zoom, Google Meet ë“±)ì˜ í•µì‹¬ ì—”ì§„

### 3. ì‹¤ì‹œê°„ í…ìŠ¤íŠ¸ ë° ì‹ í˜¸ ì£¼ê³ ë°›ê¸°

#### WebSocket - ì±„íŒ… ë° ì‹œê·¸ë„ë§

**ì—­í• **: í•œ ë²ˆ ì—°ê²°í•˜ë©´ ê³„ì† í†µë¡œë¥¼ ì—´ì–´ë‘ê³  ë°ì´í„°ë¥¼ ì–‘ë°©í–¥ìœ¼ë¡œ ì£¼ê³ ë°›ëŠ” ê¸°ìˆ 

**ì±„íŒ…**: "ì•ˆë…•?" í•˜ë©´ ì¦‰ì‹œ ìƒëŒ€ì—ê²Œ í…ìŠ¤íŠ¸ê°€ ì „ë‹¬

**ì‹œê·¸ë„ë§**: WebRTCì—ì„œ ì„œë¡œ ì˜ìƒ í†µí™”ë¥¼ ì‹œì‘í•˜ê¸° ì „, "ë‚´ IPëŠ” ì´ê±°ì•¼, ë°›ì„ë˜?" í•˜ê³  ì „í™”ë²¨ì„ ìš¸ë¦¬ëŠ” ì‹ í˜¸ êµí™˜ ìš©ë„ë¡œ í•„ìˆ˜ì 

**íŠ¹ì§•**:
- TCP ê¸°ë°˜
- ì–‘ë°©í–¥ ì‹¤ì‹œê°„ í†µì‹ 
- í…ìŠ¤íŠ¸ ë©”ì‹œì§€ì— ì í•©
- ë¯¸ë””ì–´ ìŠ¤íŠ¸ë¦¬ë°ì—ëŠ” ë¶€ì í•© (TCP ì¬ì „ì†¡ ì§€ì—°)

## ğŸ”„ ì‹¤ì œ ì„œë¹„ìŠ¤ ì‹œë‚˜ë¦¬ì˜¤

### ìœ íŠœë¸Œ ë¼ì´ë¸Œ ìŠ¤íŠ¸ë¦¬ë°

```
ìŠ¤íŠ¸ë¦¬ë¨¸ (OBS)
    â†“ RTMP (ì†¡ì¶œ)
ìŠ¤íŠ¸ë¦¬ë° ì„œë²„
    â†“ HLS/DASH ë³€í™˜
CDN (ì „ì„¸ê³„ ë°°í¬)
    â†“ HLS (ì‹œì²­)
ì‹œì²­ì (ë¸Œë¼ìš°ì €/ì•±)

+ WebSocket (ì‹¤ì‹œê°„ ì±„íŒ…)
```

**ì‚¬ìš© ê¸°ìˆ **:
- RTMPë¡œ ì˜ê³ 
- CDNì„ ê±°ì³
- HLSë¡œ ì‹œì²­
- ì±„íŒ…ì€ WebSocket

### í™”ìƒ íšŒì˜ (Zoom, Google Meet)

```
ì°¸ê°€ì A
    â†“ WebSocket (ì‹œê·¸ë„ë§)
ì‹œê·¸ë„ë§ ì„œë²„ (ì—°ê²° ì„¤ì •)
    â†“
ì°¸ê°€ì A â†â†’ SFU ì„œë²„ â†â†’ ì°¸ê°€ì B (WebRTC/UDP)
             â†•
          ì°¸ê°€ì C

+ STUN/TURN (NAT í†µê³¼)
+ WebSocket (ì±„íŒ…, ì œì–´)
```

**ì‚¬ìš© ê¸°ìˆ **:
- WebRTCë¥¼ ì“°ê³ 
- SFU ì„œë²„ë¥¼ ê±°ì¹˜ë©°
- ì—°ê²°ì„ ìœ„í•´ STUN/TURNì´ í•„ìš”
- ì‹œê·¸ë„ë§ê³¼ ì±„íŒ…ì€ WebSocket

## ğŸ†š TCP vs UDP ì°¨ì´

### TCP (WebSocket)

**íŠ¹ì§•**:
- ì‹ ë¢°ì„± ë³´ì¥ (íŒ¨í‚· ì†ì‹¤ ì‹œ ì¬ì „ì†¡)
- ìˆœì„œ ë³´ì¥
- Head-of-line blocking ë¬¸ì œ

**ë™ì‘**:
```
[íŒ¨í‚· 1] [íŒ¨í‚· 2] [íŒ¨í‚· 3-ì†ì‹¤!] [íŒ¨í‚· 4] [íŒ¨í‚· 5]
                    â†“
         [ì¬ì „ì†¡ ìš”ì²­]
                    â†“
         [íŒ¨í‚· 3 ì¬ì „ì†¡ ëŒ€ê¸°...]
                    â†“
         [íŒ¨í‚· 4, 5ëŠ” ë²„í¼ì—ì„œ ëŒ€ê¸°] â† Head-of-line blocking!

ê²°ê³¼: íŒ¨í‚· 3ê°€ ë„ì°©í•  ë•Œê¹Œì§€ 4, 5ë„ ì „ë‹¬ ì•ˆ ë¨
í™”ìƒ íšŒì˜: í™”ë©´ì´ ë©ˆì¶¤!
```

**ì í•©í•œ ìš©ë„**: ì±„íŒ…, ì œì–´ ë©”ì‹œì§€, íŒŒì¼ ì „ì†¡

### UDP (WebRTC)

**íŠ¹ì§•**:
- ì‹ ë¢°ì„± ë³´ì¥ ì—†ìŒ (íŒ¨í‚· ì†ì‹¤ ì‹œ ê·¸ëƒ¥ ë¬´ì‹œ)
- ìˆœì„œ ë³´ì¥ ì—†ìŒ
- ë‚®ì€ ì§€ì—° ì‹œê°„

**ë™ì‘**:
```
[íŒ¨í‚· 1] [íŒ¨í‚· 2] [íŒ¨í‚· 3-ì†ì‹¤!] [íŒ¨í‚· 4] [íŒ¨í‚· 5]
  â†“        â†“                       â†“        â†“
ì „ë‹¬     ì „ë‹¬      ë²„ë¦¼           ì „ë‹¬     ì „ë‹¬

ê²°ê³¼: íŒ¨í‚· 3ë§Œ ì†ì‹¤, 4ì™€ 5ëŠ” ì •ìƒ ì „ë‹¬
í™”ìƒ íšŒì˜: í•œ í”„ë ˆì„ë§Œ ì•½ê°„ ê¹¨ì§€ê³  ê³„ì† ì§„í–‰
```

**ì í•©í•œ ìš©ë„**: ì˜¤ë””ì˜¤/ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë°, ì‹¤ì‹œê°„ ê²Œì„

## ğŸ” WebSocket vs WebRTC ë¹„êµ

| êµ¬ë¶„ | WebSocket | WebRTC Mesh | WebRTC SFU |
|------|-----------|------------|-----------|
| **í”„ë¡œí† ì½œ** | TCP | UDP (P2P) | UDP (ì¤‘ê³„) |
| **ì‹œê·¸ë„ë§** | WebSocket | WebSocket | WebSocket |
| **ë¯¸ë””ì–´ ì „ì†¡** | âŒ ë¶€ì í•© | âœ… P2P ì§ì ‘ | âœ… ì„œë²„ ì¤‘ê³„ |
| **ì§€ì—° ì‹œê°„** | ë†’ìŒ (50-200ms) | ë‚®ìŒ (10-50ms) | ë‚®ìŒ (20-80ms) |
| **íŒ¨í‚· ì†ì‹¤ ëŒ€ì‘** | ì¬ì „ì†¡ (ë¸”ë¡œí‚¹) | ë¬´ì‹œ (ê³„ì†) | ë¬´ì‹œ (ê³„ì†) |
| **ìš©ë„** | ì±„íŒ…, ì œì–´ | í™”ìƒ, ìŒì„± | í™”ìƒ, ìŒì„± |
| **ì„œë²„ ì—­í• ** | ëª¨ë“  ë©”ì‹œì§€ ì¤‘ê³„ | ì‹œê·¸ë„ë§ë§Œ | ìŠ¤íŠ¸ë¦¼ ì¤‘ê³„ |

### ì‹¤ì œ ì„œë¹„ìŠ¤ëŠ” ë‘˜ ë‹¤ ì‚¬ìš©!

**Zoomì˜ ì‹¤ì œ êµ¬ì¡°**:
```
í´ë¼ì´ì–¸íŠ¸ A
  |
  |-- WebSocket --------> ì‹œê·¸ë„ë§ ì„œë²„
  |     (TCP)               - ì±„íŒ… ë©”ì‹œì§€
  |                         - ì…ì¥/í‡´ì¥ ì•Œë¦¼
  |                         - ì†ë“¤ê¸°, ë°˜ì‘
  |
  |-- WebRTC -----------> SFU ë¯¸ë””ì–´ ì„œë²„
        (UDP/RTP)          - ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¼
                           - ì˜¤ë””ì˜¤ ìŠ¤íŠ¸ë¦¼
                           - í™”ë©´ ê³µìœ 
```

**ë‘ ê°œì˜ ì—°ê²°ì„ ë™ì‹œì— ì‚¬ìš©í•©ë‹ˆë‹¤!**

## ğŸ› ì£¼ì˜ì‚¬í•­ ë° ë””ë²„ê¹…

### ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ ë“±ë¡ ìˆœì„œê°€ ì¤‘ìš”!

```javascript
// âœ… ì˜¬ë°”ë¥¸ ìˆœì„œ
pc.onicecandidate = (event) => { ... };  // 1. í•¸ë“¤ëŸ¬ ë¨¼ì € ë“±ë¡
await pc.setLocalDescription(offer);      // 2. ê·¸ ë‹¤ìŒ ì„¤ì •

// âŒ ì˜ëª»ëœ ìˆœì„œ
await pc.setLocalDescription(offer);      // candidate ì´ë¯¸ ìƒì„±ë¨
pc.onicecandidate = (event) => { ... };   // í•¸ë“¤ëŸ¬ ë“±ë¡ ëŠ¦ìŒ â†’ candidate ë†“ì¹¨!
```

### ICE ì—°ê²° ìƒíƒœ í™•ì¸

```javascript
pc.oniceconnectionstatechange = (event) => {
  console.log(event.target.iceConnectionState);
  // "new" â†’ "checking" â†’ "connected" â†’ "completed" (ì •ìƒ)
  // "failed" â†’ ì—°ê²° ì‹¤íŒ¨
};
```

**ì—°ê²° ì‹¤íŒ¨ ì›ì¸**:
- ë°©í™”ë²½ ì°¨ë‹¨
- NAT ì„¤ì • ë¬¸ì œ
- STUN ì„œë²„ ì ‘ê·¼ ë¶ˆê°€
- ë™ì¼ ë¸Œë¼ìš°ì €/íƒ­ì—ì„œ í…ŒìŠ¤íŠ¸ (ê¶Œì¥: ë‹¤ë¥¸ ë¸Œë¼ìš°ì € ì‚¬ìš©)

### Remote Description ì²´í¬

```javascript
// candidateëŠ” ë°˜ë“œì‹œ remoteDescription ì„¤ì • í›„ì— ì¶”ê°€
if (pc.remoteDescription) {
  await pc.addIceCandidate(candidate);
} else {
  // íì— ì €ì¥í–ˆë‹¤ê°€ ë‚˜ì¤‘ì— ì²˜ë¦¬
}
```

## ğŸ“ ë©”ì‹œì§€ íƒ€ì…

| Type | From | To | ë‚´ìš© | ì—­í•  |
|------|------|-----|------|------|
| `new-peer` | ì‹ ê·œ í´ë¼ì´ì–¸íŠ¸ | ì„œë²„ | ìƒˆ í”¼ì–´ ì ‘ì† ì•Œë¦¼ | ì„œë²„ê°€ ë¸Œë¡œë“œìºìŠ¤íŠ¸ |
| `offer` | Offer ìƒì„±ì | ìƒëŒ€ í”¼ì–´ | SDP Offer | P2P ì—°ê²° ì‹œì‘ |
| `answer` | Offer ìˆ˜ì‹ ì | Offer ìƒì„±ì | SDP Answer | P2P ì—°ê²° ìˆ˜ë½ |
| `candidate` | ì–‘ë°©í–¥ | ì–‘ë°©í–¥ | ICE Candidate | ë„¤íŠ¸ì›Œí¬ ê²½ë¡œ ì •ë³´ |
| `peer-disconnected` | ì„œë²„ | ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ | í”¼ì–´ ì—°ê²° í•´ì œ | ì—°ê²° ì •ë¦¬ |

## ğŸ¯ í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

1. **ì •ìƒ ì—°ê²° í…ŒìŠ¤íŠ¸**
   - ë¸Œë¼ìš°ì € 2ê°œ íƒ­ ì—´ê¸°
   - ê° íƒ­ì—ì„œ ì½˜ì†” í™•ì¸
   - "ë°ì´í„° ì±„ë„ ì—´ë¦¼" ë©”ì‹œì§€ í™•ì¸
   - ë©”ì‹œì§€ ì£¼ê³ ë°›ê¸° í…ŒìŠ¤íŠ¸

2. **ë‹¤ì¤‘ í”¼ì–´ í…ŒìŠ¤íŠ¸**
   - ë¸Œë¼ìš°ì € 3ê°œ ì´ìƒ ì—´ê¸°
   - ëª¨ë“  ë¸Œë¼ìš°ì €ê°€ ì„œë¡œ ë©”ì‹œì§€ ì£¼ê³ ë°›ëŠ”ì§€ í™•ì¸

3. **ì¬ì—°ê²° í…ŒìŠ¤íŠ¸**
   - í•œ íƒ­ ë‹«ê¸°
   - ë‹¤ë¥¸ íƒ­ì—ì„œ "í”¼ì–´ ì—°ê²° í•´ì œ" ë¡œê·¸ í™•ì¸
   - ìƒˆ íƒ­ ì—´ì–´ì„œ ì¬ì—°ê²° í…ŒìŠ¤íŠ¸

## ğŸ“š ì°¸ê³  ìë£Œ

- [WebRTC API (MDN)](https://developer.mozilla.org/ko/docs/Web/API/WebRTC_API)
- [RTCPeerConnection (MDN)](https://developer.mozilla.org/ko/docs/Web/API/RTCPeerConnection)
- [RTCDataChannel (MDN)](https://developer.mozilla.org/ko/docs/Web/API/RTCDataChannel)
- [WebSocket API (MDN)](https://developer.mozilla.org/ko/docs/Web/API/WebSocket)
